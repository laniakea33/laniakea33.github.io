---
title: "[Java] Java 01"
categories:
    - Java
---
package ex01;

import java.net.InetAddress;
import java.net.UnknownHostException;

/*
 * 소켓 프로그래밍 - InetAddress
 * IP주소 관리 클래스
 */

public class Main {

	public static void main(String[] args) {
		InetAddress ia = null;
		try {
			ia = InetAddress.getByName("www.google.co.kr");
			System.out.println("정보 획득");
			System.out.println("호스트명 : " + ia.getHostName());
			System.out.println("호스트주소 : " + ia.getHostAddress());
			System.out.println("로컬호스트 : " + InetAddress.getLocalHost());
			
			InetAddress[] ia2 = InetAddress.getAllByName("www.daum.net");
			for(int i = 0; i < ia2.length; i++) {
				System.out.println(ia2[i]);
			}
		} catch (UnknownHostException e) {
			e.printStackTrace();
		}
	}
}





package ex02;
/*
 * ServerSocket
 * 서버에 접속이 가능한 포트를 지정, 관리
 * 접속 요청을 관리
 * 
 * Socket
 * 접속후에 연결을 관리
 */
import java.io.IOException;
import java.net.ServerSocket;

public class Main {

	public static void main(String[] args) {
		ServerSocket ss = null;
		for(int i = 1; i < 65535; i++) {
			try {
				ss = new ServerSocket(i);
				ss.close();
			} catch (IOException e) {
				System.out.println(i + "번 포트가 열려있음");
			}
		}
		
	}
}






package ex03_client;
/*
 * Client Side
 */
import java.io.IOException;
import java.io.PrintWriter;
import java.net.InetAddress;
import java.net.Socket;

public class Main {

	public static void main(String[] args) {
		InetAddress ia = null;
		Socket socket = null;
		try {
			//	127.0.0.1은 나 자신
			ia = InetAddress.getByName("192.168.0.100");
			//	ia의 IP주소의 22222포트로 접속하겠습니다. 
			socket = new Socket(ia, 22222);
			//	출력스트림을 소켓에다가 연결
			PrintWriter pw = new PrintWriter(socket.getOutputStream());
			pw.println("메렁");
			pw.flush();
		} catch (IOException e) {
			System.out.println("접속 오류...");
			System.exit(-1);
		} finally {
			try {
				socket.close();
			} catch (IOException e) {
				e.printStackTrace();
			}
		}
	}










package ex03_server;

import java.io.IOException;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.Scanner;
/*
 * Server Side
 * 포트주소는 0~65535번이 있다
 * 0~1023번은 well known port(알려진 포트)
 * 열려있는 포트는 건드리면 안된다.
 */

class MyThread implements Runnable {

	@Override
	public void run() {
		
	}
}

public class Main {
	public static void main(String[] args) {
		ServerSocket serverSocket = null;
		Socket socket = null;
		try {
			serverSocket = new ServerSocket(22222);
			System.out.println("서버 시작...");
		} catch (IOException e) {
			// 사용중인 포트일 경우에 IOException발생
			System.out.println("Port 사용 중...");
		}
		try {
			// ServerSocket.accept() : 클라이언트 접속 요청을 대기, 접속이 되면 클라이언트의 정보를 리턴
			socket = serverSocket.accept();
			System.out.println(socket);
			//	Socket으로부터 입력스트림을 받기로 함
			Scanner sc = new Scanner(socket.getInputStream());
			String data = sc.nextLine();
			System.out.println("클라이언트가 보낸 문자열 : " + data);
			
		} catch (IOException e) {
			e.printStackTrace();
		} finally {
			try {
				socket.close();
			} catch (IOException e) {
				System.out.println("소켓 닫다가 에러남");
				e.printStackTrace();
			}
		}
	}
}